{"version":3,"sources":["uni-app:///main.js","webpack:///D:/workspace/wechat/wechatapp-moive/pages/tabBar/movie/movie.vue?d0a0","webpack:///D:/workspace/wechat/wechatapp-moive/pages/tabBar/movie/movie.vue?fc60","webpack:///D:/workspace/wechat/wechatapp-moive/pages/tabBar/movie/movie.vue?fa0e","webpack:///D:/workspace/wechat/wechatapp-moive/pages/tabBar/movie/movie.vue?2c72","uni-app:///pages/tabBar/movie/movie.vue","webpack:///D:/workspace/wechat/wechatapp-moive/pages/tabBar/movie/movie.vue?4bec","webpack:///D:/workspace/wechat/wechatapp-moive/pages/tabBar/movie/movie.vue?e0f0"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","components","movieSection","nothing","loadingMore","data","city","switchItem","movieList0","movieIds0","loadComplete0","mostExpectedList","movieList1","movieIds1","loadComplete1","loadComplete2","movie","id","img","nm","wish","comingTitle","onLoad","onShow","onReachBottom","onShareAppMessage","title","path","methods","initPage","app","firstLoad","uni","request","api","res","err","movieList","movieIds","selectItem","limit","optimus_uuid","optimus_risk_level","optimus_code","token","ReachBottom","complete","length","item","query","arr","lower","offset","formatImgUrl","newArr"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,cAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkH;AAClH;AACyD;AACL;AACa;;;AAGjE;AACqL;AACrL,gBAAgB,yLAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,gFAAM;AACR,EAAE,yFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC3BA;AAAA;AAAA;AAAA;AAA4rB,CAAgB,2qBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC+DhtB;AACA;AAAA,eACA;EACAC;IACAC;IACAC;IACAC;EACA;EACAC;IACA;MACAC;MACA;MACAC;MAEA;MACA;MACAC;MAEAC;MACAC;MAEA;MACA;MACAC;MAEAC;MACAC;MACAC;MAEA;MACAC;MAEAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;MAEAA;IACA;EACA;EACAC;IACA;EACA;EACAC;IACA;MACA;QACAjB;MACA;IACA;EACA;EACA;EACAkB;IACA,IACAjB,aAOA,KAPAA;MACAC,aAMA,KANAA;MACAC,YAKA,KALAA;MACAC,gBAIA,KAJAA;MACAE,aAGA,KAHAA;MACAC,YAEA,KAFAA;MACAC,gBACA,KADAA;IAEA;MACA;IACA;MACA;IACA;EACA;EACA;EACAW;IACA;MACAC;MACAC;IACA;EACA;EACAC;IACAC;MAAA;MACA;MACA;QACA;UACAvB;QACA;MACA;QACAwB;UACA;YACAxB;UACA;QACA;MACA;MACA;IACA;IACA;IACAyB;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAC;kBACAN;gBACA;gBAAA;gBAAA,OACAO;kBACAC;gBACA;cAAA;gBAAA;gBAAA;gBAFAC;gBAAAC;gBAGA;kBAAA,iBAIAD,IAFAE,wFAEAF,IADAG;kBAEA9B;kBACA;oBACAC;oBACAD;kBACA;kBACA;oBACA;sBACAE;oBACA;kBACA;gBACA;gBACAsB;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACA;IACAO;MAAA;MACA;MACA;QACAhC;MACA;MACA;QACAyB;UACAN;QACA;QACAO;UACAC;QACA;UAAA;YAAAC;UACA;YACAxB;UACA;QACA;UACAqB;QACA;QACAC;UACAC;UACA7B;YACAmC;YACAC;YACAC;YACAC;YACAC;UACA;QACA;UAAA;YAAAT;UACA;YACAtB;YACAD;UACA;QACA;MACA;IACA;IAEA;IACAiC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,KACAC;kBAAA;kBAAA;gBAAA;gBAAA;cAAA;gBAGAC;gBACA;kBACA,uEACAC,aACA;gBACA;gBACAC;gBAAA;gBAAA,OACAhB;kBACAC;gBACA;cAAA;gBAAA;gBAAA;gBAFAC;gBAAAC;gBAGA;kBACAc;kBACA,oEACAF,YACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IAEA;IACAG;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAEAxC,mBAEA,OAFAA,kBACAI,gBACA,OADAA;gBAEAgC;gBAAA,KACAhC;kBAAA;kBAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA,OAGAkB;kBACAC;kBACA7B;oBACAmC;oBACAY;oBACAR;kBACA;gBACA;cAAA;gBAAA;gBAAA;gBAPAT;gBAAAC;gBAQA;kBACA;oBACAzB;oBACAI;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IAEA;IACAsC;MAAA;MACA;MACA;QACA;MACA;MACA;MACAH;QACA;QACA;UACAxB;QACA;QACA;QACA4B,4CACAN;UACA3B;UACAH;QAAA,GACA;MACA;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;AClSA;AAAA;AAAA;AAAA;AAAm/B,CAAgB,w7BAAG,EAAC,C;;;;;;;;;;;ACAvgC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/tabBar/movie/movie.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/tabBar/movie/movie.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./movie.vue?vue&type=template&id=a743d10e&\"\nvar renderjs\nimport script from \"./movie.vue?vue&type=script&lang=js&\"\nexport * from \"./movie.vue?vue&type=script&lang=js&\"\nimport style0 from \"./movie.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../Application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/tabBar/movie/movie.vue\"\nexport default component.exports","export * from \"-!../../../../../../Application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../Application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../Application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../Application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../Application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./movie.vue?vue&type=template&id=a743d10e&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 =\n    _vm.switchItem !== 1 ? !_vm.loadComplete0 && _vm.movieList0.length : null\n  var g1 = _vm.switchItem !== 1 ? _vm.movieList0.length : null\n  var g2 = _vm.switchItem !== 0 ? _vm.mostExpectedList.length : null\n  var g3 =\n    _vm.switchItem !== 0 ? !_vm.loadComplete1 && _vm.movieList1.length : null\n  var g4 = _vm.switchItem !== 0 ? _vm.movieList1.length : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        g1: g1,\n        g2: g2,\n        g3: g3,\n        g4: g4,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../Application/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../Application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./movie.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../Application/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../Application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./movie.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\t\t<view class=\"topbar\">\r\n\t\t\t<navigator class=\"city-entry\" url=\"../../subPages/city-select/city-select\">\r\n\t\t\t\t<text class=\"city-name\">{{city}}</text>\r\n\t\t\t\t<text class=\"city-entry-arrow\"></text>\r\n\t\t\t</navigator>\r\n\t\t\t<view class=\"switch-hot\">\r\n\t\t\t\t<view :class=\"'hot-item '+(switchItem===0 ? 'active' :'')\" @tap=\"selectItem\" :data-item=\"0\">正在热映</view>\r\n\t\t\t\t<view :class=\"'hot-item '+(switchItem===1 ? 'active' :'')\" @tap=\"selectItem\" :data-item=\"1\">即将上映</view>\r\n\t\t\t</view>\r\n\t\t\t<navigator class=\"search-entry\" url=\"../../subPages/search-page/search-page?stype=-1\">\r\n\t\t\t\t<text class=\"iconfont icon-sousuo\"></text>\r\n\t\t\t</navigator>\r\n\t\t</view>\r\n\t\t<view class=\"switch-content\">\r\n\t\t\t<view v-if=\"switchItem !== 1\">\r\n\t\t\t\t<movieSection compName=\"movieSection\" :data=\"{movie:movie}\" v-for=\"(movie,index) in (movieList0)\"\r\n\t\t\t\t\t:key=\"index\">\r\n\t\t\t\t</movieSection>\r\n\t\t\t\t<view v-if=\"(!loadComplete0 && movieList0.length)\">\r\n\t\t\t\t\t<loadingMore compName=\"loadingMore\"></loadingMore>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view v-if=\"movieList0.length===0\">\r\n\t\t\t\t\t<nothing compName=\"nothing\" :data=\"{message:\" 暂无影片\"}\"></nothing>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view v-if=\"switchItem !== 0\">\r\n\t\t\t\t<view class=\"most-expected\" v-if=\"mostExpectedList.length\">\r\n\t\t\t\t\t<view class=\"title\">近期最受期待</view>\r\n\t\t\t\t\t<scroll-view class=\"scroll-view_H\" scroll-x @scrolltolower=\"lower\">\r\n\t\t\t\t\t\t<navigator :url=\"'/pages/subPages/movie-detail/movie-detail?movieId='+(movie.id)\"\r\n\t\t\t\t\t\t\tclass=\"expected-item\" v-for=\"(movie,index) in (mostExpectedList)\" :key=\"index\">\r\n\t\t\t\t\t\t\t<image :src=\"movie.img\" class=\"poster\"></image>\r\n\t\t\t\t\t\t\t<view class=\"name line-ellipsis\">{{movie.nm}}</view>\r\n\t\t\t\t\t\t\t<view class=\"data line-ellipsis\">{{movie.wish}}人想看</view>\r\n\t\t\t\t\t\t\t<view class=\"data\">{{movie.comingTitle}}</view>\r\n\t\t\t\t\t\t</navigator>\r\n\t\t\t\t\t</scroll-view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<block v-for=\"(movie,index) in (movieList1)\" :key=\"index\">\r\n\t\t\t\t\t<block v-if=\"index===0||movieList1[index-1].comingTitle!==movie.comingTitle\">\r\n\t\t\t\t\t\t<view class=\"title\">{{movie.comingTitle}}</view>\r\n\t\t\t\t\t\t<movieSection compName=\"movieSection\" :data=\"{movie:movie,rt:true}\"></movieSection>\r\n\t\t\t\t\t</block>\r\n\t\t\t\t\t<movieSection compName=\"movieSection\" :data=\"{movie:movie,rt:true}\" v-else></movieSection>\r\n\t\t\t\t</block>\r\n\t\t\t\t<view v-if=\"(!loadComplete1 && movieList1.length)\">\r\n\t\t\t\t\t<loadingMore compName=\"loadingMore\"></loadingMore>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view v-if=\"movieList1.length===0\">\r\n\t\t\t\t\t<!-- <template is='nothing' data='{{message:\"暂无影片\"}}' /> -->\r\n\t\t\t\t\t暂无影片\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport movieSection from \"../../../templates/movieSection/movieSection.vue\";\r\n\timport nothing from \"../../../templates/nothing/nothing.vue\";\r\n\timport loadingMore from \"../../../templates/loadingMore/loadingMore.vue\";\r\n\tconst request = require('../../../utils/request');\r\n\tconst app = getApp();\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\tmovieSection,\r\n\t\t\tnothing,\r\n\t\t\tloadingMore\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tcity: '正在定位...',\r\n\t\t\t\t// city: '成都',\r\n\t\t\t\tswitchItem: 0,\r\n\r\n\t\t\t\t//默认选择‘正在热映’\r\n\t\t\t\t//‘正在热映’数据\r\n\t\t\t\tmovieList0: [],\r\n\r\n\t\t\t\tmovieIds0: [],\r\n\t\t\t\tloadComplete0: false,\r\n\r\n\t\t\t\t//‘正在上映’数据是否加载到最后一条\r\n\t\t\t\t//‘即将上映’数据\r\n\t\t\t\tmostExpectedList: [],\r\n\r\n\t\t\t\tmovieList1: [],\r\n\t\t\t\tmovieIds1: [],\r\n\t\t\t\tloadComplete1: false,\r\n\r\n\t\t\t\t//水平滚动加载的数据是否加载完毕\r\n\t\t\t\tloadComplete2: false,\r\n\r\n\t\t\t\tmovie: {\r\n\t\t\t\t\tid: \"\",\r\n\t\t\t\t\timg: \"\",\r\n\t\t\t\t\tnm: \"\",\r\n\t\t\t\t\twish: \"\",\r\n\t\t\t\t\tcomingTitle: \"\"\r\n\t\t\t\t},\r\n\r\n\t\t\t\tcomingTitle: \"\"\r\n\t\t\t};\r\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\tthis.initPage();\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\tif (app.globalData.selectCity) {\r\n\t\t\t\tthis.setData({\r\n\t\t\t\t\tcity: app.globalData.selectCity.cityName\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t//上拉触底刷新\r\n\t\tonReachBottom() {\r\n\t\t\tconst {\r\n\t\t\t\tswitchItem,\r\n\t\t\t\tmovieList0,\r\n\t\t\t\tmovieIds0,\r\n\t\t\t\tloadComplete0,\r\n\t\t\t\tmovieList1,\r\n\t\t\t\tmovieIds1,\r\n\t\t\t\tloadComplete1\r\n\t\t\t} = this;\r\n\t\t\tif (this.switchItem === 0) {\r\n\t\t\t\tthis.ReachBottom(movieList0, movieIds0, loadComplete0, 0);\r\n\t\t\t} else {\r\n\t\t\t\tthis.ReachBottom(movieList1, movieIds1, loadComplete1, 1);\r\n\t\t\t}\r\n\t\t},\r\n\t\t//转发\r\n\t\tonShareAppMessage(res) {\r\n\t\t\treturn {\r\n\t\t\t\ttitle: '快来看看附近的电影院',\r\n\t\t\t\tpath: 'pages/tabBar/movie/movie'\r\n\t\t\t};\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tinitPage() {\r\n\t\t\t\t//https://www.jianshu.com/p/aaf65625fc9d   解释的很好\r\n\t\t\t\tif (app.globalData.userLocation) {\r\n\t\t\t\t\tthis.setData({\r\n\t\t\t\t\t\tcity: app.globalData.selectCity ? app.globalData.selectCity.cityName : '定位失败'\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tapp.globalData.userLocationReadyCallback = () => {\r\n\t\t\t\t\t\tthis.setData({\r\n\t\t\t\t\t\t\tcity: app.globalData.selectCity ? app.globalData.selectCity.cityName : '定位失败'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\tthis.firstLoad();\r\n\t\t\t},\r\n\t\t\t//第一次加载页面时请求‘正在热映的数据’\r\n\t\t\tasync firstLoad() {\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '正在加载...'\r\n\t\t\t\t});\r\n\t\t\t\tconst [res, err] = await request({\r\n\t\t\t\t\tapi: '/ajax/movieOnInfoList'\r\n\t\t\t\t});\r\n\t\t\t\tif (!err) {\r\n\t\t\t\t\tconst {\r\n\t\t\t\t\t\tmovieList = [],\r\n\t\t\t\t\t\t\tmovieIds = []\r\n\t\t\t\t\t} = res;\r\n\t\t\t\t\tconst movieList0 = this.formatImgUrl(movieList);\r\n\t\t\t\t\tthis.setData({\r\n\t\t\t\t\t\tmovieIds0: movieIds,\r\n\t\t\t\t\t\tmovieList0\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (movieList.length >= movieIds.length) {\r\n\t\t\t\t\t\tthis.setData({\r\n\t\t\t\t\t\t\tloadComplete0: true\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tuni.hideLoading();\r\n\t\t\t},\r\n\t\t\t//切换swtch\r\n\t\t\tselectItem(e) {\r\n\t\t\t\tconst item = e.currentTarget.dataset.item;\r\n\t\t\t\tthis.setData({\r\n\t\t\t\t\tswitchItem: item\r\n\t\t\t\t});\r\n\t\t\t\tif (item === 1 && !this.mostExpectedList.length) {\r\n\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\ttitle: '正在加载...'\r\n\t\t\t\t\t});\r\n\t\t\t\t\trequest({\r\n\t\t\t\t\t\tapi: '/ajax/mostExpected?limit=10&offset=0&token='\r\n\t\t\t\t\t}).then(([res]) => {\r\n\t\t\t\t\t\tthis.setData({\r\n\t\t\t\t\t\t\tmostExpectedList: this.formatImgUrl(res.coming || [], true)\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}).finally(() => {\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t});\r\n\t\t\t\t\trequest({\r\n\t\t\t\t\t\tapi: '/ajax/comingList',\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\tlimit: 10,\r\n\t\t\t\t\t\t\toptimus_uuid: 'B52C96001E4B11EA928853AC6CFDBC0221750D6FF9374A35B50A070B3195ED15',\r\n\t\t\t\t\t\t\toptimus_risk_level: 71,\r\n\t\t\t\t\t\t\toptimus_code: 10,\r\n\t\t\t\t\t\t\ttoken: ''\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).then(([res]) => {\r\n\t\t\t\t\t\tthis.setData({\r\n\t\t\t\t\t\t\tmovieIds1: res.movieIds || [],\r\n\t\t\t\t\t\t\tmovieList1: this.formatImgUrl(res.coming || [])\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t//上拉触底刷新的加载函数\r\n\t\t\tasync ReachBottom(list, ids, complete, item) {\r\n\t\t\t\tif (complete) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst length = list.length;\r\n\t\t\t\tif (length + 10 >= ids.length) {\r\n\t\t\t\t\tthis.setData({\r\n\t\t\t\t\t\t[`loadComplete${item}`]: true\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tlet query = ids.slice(length, length + 10).join('%2C');\r\n\t\t\t\tconst [res, err] = await request({\r\n\t\t\t\t\tapi: `/ajax/moreComingList?token=&movieIds=${query}`\r\n\t\t\t\t});\r\n\t\t\t\tif (!err) {\r\n\t\t\t\t\tconst arr = list.concat(this.formatImgUrl(res.coming || []));\r\n\t\t\t\t\tthis.setData({\r\n\t\t\t\t\t\t[`movieList${item}`]: arr\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t//滚动到最右边时的事件处理函数\r\n\t\t\tasync lower() {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tmostExpectedList,\r\n\t\t\t\t\tloadComplete2\r\n\t\t\t\t} = this;\r\n\t\t\t\tconst length = mostExpectedList.length;\r\n\t\t\t\tif (loadComplete2) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst [res, err] = await request({\r\n\t\t\t\t\tapi: \"/ajax/mostExpected\",\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tlimit: 10,\r\n\t\t\t\t\t\toffset: length,\r\n\t\t\t\t\t\ttoken: ''\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tif (!err) {\r\n\t\t\t\t\tthis.setData({\r\n\t\t\t\t\t\tmostExpectedList: mostExpectedList.concat(this.formatImgUrl(res.coming || [], true)),\r\n\t\t\t\t\t\tloadComplete2: !res.paging.hasMore || !res.coming.length //当返回的数组长度为0时也认为数据请求完毕\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t//处理图片url\r\n\t\t\tformatImgUrl(arr, cutTitle = false) {\r\n\t\t\t\t//小程序不能在{{}}调用函数，所以我们只能在获取API的数据时处理，而不能在wx:for的每一项中处理\r\n\t\t\t\tif (!Array.isArray(arr)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tlet newArr = [];\r\n\t\t\t\tarr.forEach(item => {\r\n\t\t\t\t\tlet title = item.comingTitle;\r\n\t\t\t\t\tif (cutTitle) {\r\n\t\t\t\t\t\ttitle = item.comingTitle.split(' ')[0];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet imgUrl = item.img.replace('w.h', '128.180');\r\n\t\t\t\t\tnewArr.push({\r\n\t\t\t\t\t\t...item,\r\n\t\t\t\t\t\tcomingTitle: title,\r\n\t\t\t\t\t\timg: imgUrl\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\treturn newArr;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n</script>\r\n\r\n<style>\r\n\t/* @import \"../../../templates/movieSection/movieSection.css\"; */\r\n\t.switch-hot {\r\n\t\tdisplay: flex;\r\n\t\theight: 88rpx;\r\n\t\tline-height: 88rpx;\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t.hot-item {\r\n\t\tfont-size: 30rpx;\r\n\t\tcolor: #666;\r\n\t\twidth: 21.33333vw;\r\n\t\ttext-align: center;\r\n\t\tmargin: 0 24rpx;\r\n\t\tfont-weight: 700;\r\n\t}\r\n\r\n\t.hot-item.active {\r\n\t\tcolor: #ef4238;\r\n\t\tborder-bottom: 2px solid #ef4238;\r\n\t}\r\n\t.search-entry {\r\n\t\tcolor: #ef4238;\r\n\t\tfont-weight: 700;\r\n\t\theight: 100%;\r\n\t\tline-height: 90rpx;\r\n\t\tpadding: 0 30rpx;\r\n\t}\r\n\t.search-entry .iconfont {\r\n\t\tfont-size: 36rpx;\r\n\t}\r\n\t/* switch-content */\r\n\t.switch-content {\r\n\t\tpadding-bottom: 30rpx;\r\n\t}\r\n\t.title {\r\n\t\tpadding: 0 30rpx;\r\n\t\tpadding-top: 20rpx;\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #333;\r\n\t}\r\n\t.most-expected {\r\n\t\tposition: relative;\r\n\t\tpadding: 0 30rpx;\r\n\t\tpadding-bottom: 20rpx;\r\n\t\tborder-bottom: 20rpx solid #f5f5f5;\r\n\t}\r\n\t.most-expected .title {\r\n\t\tpadding-left: 0;\r\n\t\tmargin-bottom: 20rpx;\r\n\t}\r\n\t.expected-item {\r\n\t\tdisplay: inline-block;\r\n\t\twidth: 170rpx;\r\n\t\toverflow: hidden;\r\n\t\tmargin-right: 20rpx;\r\n\t}\r\n\t.poster {\r\n\t\tposition: relative;\r\n\t\twidth: 170rpx;\r\n\t\theight: 230rpx;\r\n\t\tmargin-bottom: 12rpx;\r\n\t}\r\n\t.name {\r\n\t\tmargin-bottom: 3px;\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #333;\r\n\t}\r\n\t.data {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #999;\r\n\t}\r\n</style>","import mod from \"-!../../../../../../Application/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../Application/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../Application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../Application/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../Application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./movie.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../Application/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../Application/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../Application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../Application/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../Application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./movie.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1689142076495\n      var cssReload = require(\"D:/Application/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}